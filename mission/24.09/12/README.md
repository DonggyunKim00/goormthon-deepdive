## â“í´ë¡œì €ë€â“

- **í•¨ìˆ˜ì™€ í•¨ìˆ˜ê°€ ì„ ì–¸ëœ ì–´íœ˜ì  í™˜ê²½(ë ‰ì‹œì»¬ í™˜ê²½)ì˜ ì¡°í•©**
  - í•¨ìˆ˜ê°€ ì„ ì–¸ëœ ë ‰ì‹œì»¬ í™˜ê²½? ( ê°€ì¥ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•¨! )
  - ë ‰ì‹œì»¬í™˜ê²½ì´ë€ ì•„ë˜ ì˜ˆì œì™€ ê°™ì´ í•¨ìˆ˜ê°€ ì„ ì–¸ëœ í™˜ê²½ì— ë”°ë¼ ë‹¬ë¼ì§€ëŠ” ê²ƒ
  ```jsx
  // ì˜ˆì œ 1
  // inner í•¨ìˆ˜ì˜ ì •ì˜ê°€ outer í•¨ìˆ˜ì˜ ë‚´ë¶€ì— ìˆìŒ
  const x = 1;

  function outer() {
    const x = 10;
    function inner() {
      console.log(x); // 10
    }
    inner();
  }

  outer();

  // ì˜ˆì œ 2
  // inner í•¨ìˆ˜ì˜ ì •ì˜ê°€ outer í•¨ìˆ˜ì˜ ì™¸ë¶€ì— ìˆìŒ
  const x = 1;

  function outer() {
    const x = 10;
    inner();
  }

  function inner() {
    console.log(x); // 1
  }
  outer();
  ```
- ì™¸ë¶€ í•¨ìˆ˜ë³´ë‹¤ ì¤‘ì²© í•¨ìˆ˜ê°€ ë” ì˜¤ë˜ ìœ ì§€ë˜ëŠ” ê²½ìš° â‡’ **ì™¸ë¶€ í•¨ìˆ˜ì˜ ìƒëª… ì£¼ê¸°ê°€ ë**ë‚˜ë„ **ì™¸ë¶€ í•¨ìˆ˜ì˜ ë³€ìˆ˜ë¥¼ ì¤‘ì²©í•¨ìˆ˜ê°€ ì°¸ì¡°**í•  ìˆ˜ ìˆëŠ” ê²ƒ!!
  - ì´ë•Œ ì™¸ë¶€ í•¨ìˆ˜ê°€ ì¢…ë£Œ ëëŠ”ë° ì–´ë–»ê²Œ ë‚´ë¶€ í•¨ìˆ˜ê°€ ì™¸ë¶€ í•¨ìˆ˜ì˜ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆì§€?
  ```abap
  ğŸ’¡**ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸**ì™€ **ë ‰ì‹œì»¬ í™˜ê²½**

  - ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ êµ¬ì¡°
  	- **í™˜ê²½ ë ˆì½”ë“œ**: í˜¸ì¶œëœ í•¨ìˆ˜ì—ì„œ ì„ ì–¸ëœ ë³€ìˆ˜, í•¨ìˆ˜ì˜ ì •ë³´
  	- **ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½**(ìƒìœ„ ìŠ¤ì½”í”„): ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ì˜ í™˜ê²½ë ˆì½”ë“œ + ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½

  - ìŠ¤ì½”í”„
  	- ìŠ¤ì½”í”„ì˜ ì‹¤ì²´ëŠ” **ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ ë ‰ì‹œì»¬ í™˜ê²½**ì´ë‹¤!
  	- ë ‰ì‹œì»¬ í™˜ê²½ì€ ìì‹ ì˜ ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ í†µí•´ ìƒìœ„ ë ‰ì‹œì»¬ í™˜ê²½ê³¼ ì—°ê²°ëœë‹¤!
  		=> (ìŠ¤ì½”í”„ ì²´ì¸)

  - ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ë€?
  	- í•¨ìˆ˜ê°€ ì •ì˜ëœ ìœ„ì¹˜ì— ë”°ë¼ì„œ ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ì˜ ì°¸ì¡°ê°€ ê²°ì • ë˜ëŠ” ê²ƒ!!
  	- ì´ë•Œ ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½(ìƒìœ„ ìŠ¤ì½”í”„)ì˜ ì°¸ì¡°ëŠ” ë‚´ë¶€ ìŠ¬ë¡¯ [[Environment]] ì— ì €ì¥ë¨!

  - ë‚´ë¶€ ìŠ¬ë¡¯ì´ë€?
  	- í•¨ìˆ˜ê°€ ì •ì˜ëœ í™˜ê²½ê³¼ í˜¸ì¶œë˜ëŠ” í™˜ê²½ì´ ë‹¤ë¥¼ìˆ˜ ìˆëŠ”ë°, ì´ë•Œ í•´ë‹¹ í•¨ìˆ˜ì˜ ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê³„ì† ê¸°ì–µí•˜ê³ 
  		ìˆì–´ì•¼ í•œë‹¤! ë”°ë¼ì„œ í•¨ìˆ˜ëŠ” ìì‹ ì˜ ë‚´ë¶€ ìŠ¬ë¡¯ [[Environment]]ì— ìì‹ ì´ ì •ì˜ëœ í™˜ê²½(ìƒìœ„ ìŠ¤ì½”í”„)
  		ì˜ ì°¸ì¡°ë¥¼ ì €ì¥í•œë‹¤!
  	- ìƒìœ„ ìŠ¤ì½”í”„ê°€ í•¨ìˆ˜ ê°ì²´ì˜ ë‚´ë¶€ ìŠ¬ë¡¯ì— ì €ì¥ë˜ë¯€ë¡œ í•¨ìˆ˜ ê°ì²´ê°€ ì¡´ì¬í•˜ëŠ” í•œ ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ì°¸ì¡° í•˜ê³ 
  		ìˆë‹¤ëŠ” ëœ»ì´ë‹¤.
  		=> ì¦‰, ë‚´ë¶€ ìŠ¬ë¡¯ì´ ì—†ì–´ì§ˆë•Œê¹Œì§€(== ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ì°¸ì¡°í•˜ê³  ìˆëŠ” í•¨ìˆ˜ê°€ ì‚¬ë¼ì§ˆë•Œê¹Œì§€)
  			 ìƒìœ„ ìŠ¤ì½”í”„ëŠ” ì‚¬ë¼ì§€ì§€ ì•ŠëŠ”ë‹¤ëŠ” ëœ»ì´ë‹¤!
  			(+ ë©”ëª¨ë¦¬ì˜ ì°¸ì¡°ê°€ ì¼ì–´ë‚˜ê³  ìˆìœ¼ë¯€ë¡œ GCì˜ ëŒ€ìƒì´ ì•„ë‹ˆê²Œë¨)

  - ğŸ”¥ê²°ë¡ ğŸ”¥
  	- ìœ„ì˜ ë‚´ìš©ì„ ì¢…í•©í•´ ë´¤ì„ë•Œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ëŠ” ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì— ìŒ“ì´ë©´ì„œ ìˆ˜ëª…ì„ ë‹¤í•œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸
  		ê°€ ì—†ì–´ì§€ê²Œ ë˜ëŠ”ë°, ì´ë•Œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ëŠ” ìŠ¤íƒì—ì„œ ì—†ì–´ ì§€ë”ë¼ë„ ë‚´ë¶€ì— ê°–ê³  ìˆë˜ ë ‰ì‹œì»¬ í™˜ê²½ì´
  		ì¤‘ì²© í•¨ìˆ˜ì˜ ë‚´ë¶€ ìŠ¬ë¡¯ìœ¼ë¡œë¶€í„° ì°¸ì¡°ë˜ë©´ì„œ ì‚´ì•„ ë‚¨ì•˜ê¸°ë•Œë¬¸ì— ìˆ˜ëª…ì´ ë‹¤í•œ ì™¸ë¶€í•¨ìˆ˜ì˜ ë³€ìˆ˜ë¥¼ ë‚´ë¶€í•¨ìˆ˜ê°€
  		ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤!
  ```

## ğŸ“ í´ë¡œì € ì˜ˆì œ

1ï¸âƒ£

1. ì „ì—­ ë ‰ì‹œì»¬ í™˜ê²½ ìƒì„±(í™˜ê²½ë ˆì½”ë“œ+ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½(null))
2. í™˜ê²½ ë ˆì½”ë“œ windowì— counter í•¨ìˆ˜ ê°ì²´ ìƒì„±
3. `counter` í•¨ìˆ˜ ê°ì²´ì˜ ìƒìœ„ ìŠ¤ì½”í”„ê°€ ì „ì—­ ë ‰ì‹œì»¬ í™˜ê²½ì´ë¯€ë¡œ ë‚´ë¶€ ìŠ¬ë¡¯ì— ì „ì—­ ë ‰ì‹œì»¬ í™˜ê²½ì„ ìƒìœ„ ìŠ¤ì½”í”„ë¡œì„œ ì €ì¥

2ï¸âƒ£

1. `counter` í•¨ìˆ˜ë¥¼ í˜¸ì¶œ
2. `counter` í•¨ìˆ˜ì˜ ë ‰ì‹œì»¬ í™˜ê²½ ìƒì„± â‡’ 1ï¸âƒ£ì—ì„œ `counter` í•¨ìˆ˜ ê°ì²´ì˜ ë‚´ë¶€ìŠ¬ë¡¯ì— ì €ì¥ëœ ì „ì—­ ë ‰ì‹œì»¬ í™˜ê²½ì„ `counter` í•¨ìˆ˜ ë ‰ì‹œì»¬ í™˜ê²½ì˜ ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ì— í• ë‹¹
3. ì¤‘ì²© í•¨ìˆ˜ `up()`ê³¼ `getCount()`ê°€ í‰ê°€(ì´ ë‘ í•¨ìˆ˜ëŠ” í™”ì‚´í‘œ í•¨ìˆ˜ì´ë¯€ë¡œ ëŸ°íƒ€ì„ì—ì„œ í‰ê°€ëœë‹¤)
4. ì¤‘ì²© í•¨ìˆ˜ ê°ì²´ `up()`ê³¼ `getCount()`ëŠ” ìì‹ ì˜ ë‚´ë¶€ìŠ¬ë¡¯ì— ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½(ìƒìœ„ ìŠ¤ì½”í”„)ì¸ `counter` ë ‰ì‹œì»¬ í™˜ê²½ì˜ ì°¸ì¡°ë¥¼ í• ë‹¹í•œë‹¤.

3ï¸âƒ£

1. `counter` í•¨ìˆ˜ ì¢…ë£Œë˜ë©´ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì—ì„œ ì œê±°
2. ì´ë•Œ ì „ì—­ì— ì„ ì–¸í•œ `const count = counter();` ê°€ count í•¨ìˆ˜ ê°ì²´ë¥¼ ì°¸ì¡° í•˜ê³  ìˆë‹¤.
   (ë”°ë¼ì„œ ì „ì—­ì—ì„œ counter í•¨ìˆ˜ ê°ì²´ì˜ ë°˜í™˜ê°’ì¸ `up`, `getCount`ê°€ ì°¸ì¡°ë˜ê³ ìˆê³ , `up`ê³¼ `getCount` í•¨ìˆ˜ ê°ì²´ì˜ ë‚´ë¶€ ìŠ¬ë¡¯ì´ counter í•¨ìˆ˜ì˜ ë ‰ì‹œì»¬ í™˜ê²½ì„ ì°¸ì¡°í•˜ê³  ìˆìœ¼ë¯€ë¡œ GCì˜ ëŒ€ìƒì´ ì•„ë‹ˆê²Œ ëœë‹¤!)
3. `counter` í•¨ìˆ˜ê°€ ë°˜í™˜í•œ `up()`ê³¼ `getCount()`ë¥¼ í˜¸ì¶œí•˜ë©´ ê° í•¨ìˆ˜ì— ëŒ€í•œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒê¸°ê³  ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì— í‘¸ì‰¬ëœë‹¤.
4. `up()`ê³¼ `getCount()`ì˜ ë ‰ì‹œì»¬ í™˜ê²½ì— ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ì˜ ì°¸ì¡°ë¡œëŠ” 3ï¸âƒ£-2 ì—ì„œ ê° í•¨ìˆ˜ ë‚´ë¶€ ìŠ¬ë¡¯ì— í• ë‹¹ ë˜ì—ˆë˜ ì°¸ì¡°(counter ë ‰ì‹œì»¬ í™˜ê²½)ê°€ í• ë‹¹ëœë‹¤.

ğŸ“šÂ : `count.count` ëŠ” í•¨ìˆ˜ ê°ì²´ë¥¼ ìƒì„±í–ˆì„ë•Œì˜ ê·¸ ìƒíƒœ ê·¸ëŒ€ë¡œë¥¼ ë³µì‚¬í•œ ê²ƒ ì´ë¯€ë¡œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì™€ ë ‰ì‹œì»¬ í™˜ê²½ê³¼ëŠ” ê´€ë ¨ì´ ì—†ë‹¤!

```jsx
// 1ï¸âƒ£
function counter() {
  let count = 0;

  const up = () => {
    count += 1;
  };

  const getCount() => {
	  return count;
  }

  return {
    count,
    up,
    getCount
  };
}

// 2ï¸âƒ£
const count = counter();
// 3ï¸âƒ£

console.log(count.count); // 0
console.log(count.getCount()); // 0
count.up();
count.up();
console.log(count.count); // 2
console.log(count.getCount()); // 4
```

### ì°¸ê³  ìë£Œ

- ëª¨ë˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë”¥ë‹¤ì´ë¸Œ 24ì¥ í´ë¡œì €
- https://velog.io/@jangsebari/ë ‰ì‹œì»¬-í™˜ê²½-Lexical-Environment
- https://developer.mozilla.org/ko/docs/Web/JavaScript/Closures
